ЛР25

Кириченко Антон

ЭВТ-70

Игровой Движок: Unity.

#### Лабараторная работа №25

Тема: Разработать игру Bounce

Цель: разработка игры Bounce

Ход работы

1.	Настройка игрого поля

_______![1]![1](https://user-images.githubusercontent.com/119482774/204787052-eb6136d1-5f53-467c-ac26-01b0c4c8d202.png)



_______Рис.25.1 Папки

_______![3]![2](https://user-images.githubusercontent.com/119482774/204787436-5946f773-9cfe-4b2e-8651-e3fe1a11d98e.jpg)


 
_______Рис.25. 2. Настройка параметра Ball 



_______ ![image](https://user-images.githubusercontent.com/119482774/204788205-15d2e0b3-6c44-4abc-9293-47bcdf40a007.png)

_______ Рис.25. 3. Параметры New Sprite

_______ ![image](https://user-images.githubusercontent.com/119482774/204788329-960829e4-b269-49ab-9c44-be4466c4a68d.png)

_______Рис.25 4. Параметр PLatform

_______![image](https://user-images.githubusercontent.com/119482774/204788450-94890238-6612-4117-a43d-c1bd28cad570.png)

_______Рис. 25 6. Настройка MovingBlock

_______![image](https://user-images.githubusercontent.com/119482774/204788587-eabb020c-6e7f-40a3-8798-16fd0240e5d6.png)

_______ Рис. 25 7. Параметр MovingBlock

_______ ![image](https://user-images.githubusercontent.com/119482774/204788729-37f8e66b-83c8-4f5c-96de-168b338a4171.png)

_______ Рис. 25 8. Параметры MovingBlock (1)

_______ ![image](https://user-images.githubusercontent.com/119482774/204788799-2ed68b0c-e57a-4cec-8a2b-b9d82426e7db.png)

_______ Рис. 25 9. Параметр FallingBlock

_______ ![image](https://user-images.githubusercontent.com/119482774/204788892-ec833bef-3bfb-4851-a5b1-c636dd260d25.png)

_______ Рис. 25. 10Настройка FallingBlock (1)

_______ ![image](https://user-images.githubusercontent.com/119482774/204789044-459b6cae-699e-43e0-b100-bd965f63c877.png)

_______ Рис. 25. 11 Настройка CameraHolder

_______ ![image](https://user-images.githubusercontent.com/119482774/204789119-4928bd44-92a9-41dc-af95-3fc936436faf.png)

_______ Рис. 25. 12 Настройка Main Camera

_______ ![image](https://user-images.githubusercontent.com/119482774/204789245-611ec705-3fcf-4169-9a84-e9a462700e52.png)

_______ Рис. 25. 13 Параметр JumpHigher и его дочерние объекты

_______ ![image](https://user-images.githubusercontent.com/119482774/204789339-959e6a44-4622-4346-b45c-967f98c340e9.png)

_______ Рис. 25. 14 Настройка JumpHigher

_______ ![image](https://user-images.githubusercontent.com/119482774/204789417-87787dc4-6cb6-421f-91bd-807159409c1e.png)

_______ Рис. 25. 15 Настройка New Sprite

_______ ![image](https://user-images.githubusercontent.com/119482774/204789505-3668490a-5870-483e-a9ca-0b4ea04335a4.png)

_______  Рис. 25. 16 Параметр SlowMotion и его дочерние объект 

_______ ![image](https://user-images.githubusercontent.com/119482774/204789569-03a95a84-3c28-4227-94b5-cab5401522ac.png)

_______ Рис. 25. 17 Параметры TextMeshPro

_______ ![image](https://user-images.githubusercontent.com/119482774/204789701-089aba09-73e9-414d-a7ce-ebdc4ba2ccc6.png)

_______ Рис. 25. 18 Параметры TextMeshPro (1)

_______ ![image](https://user-images.githubusercontent.com/119482774/204789769-054948e6-2d35-41d5-8e31-2ed79c50651a.png)

_______ Рис. 25. 19 Настройка параметра Manager

_______  ![image](https://user-images.githubusercontent.com/119482774/204789887-146a829e-a8bd-4661-bc6d-b273a6f9e774.png)

_______ Рис. 25. 20 Настройка TextMeshPro в параметре fastMotion

_______ ![image](https://user-images.githubusercontent.com/119482774/204789957-97cb0fac-ac2f-4359-9056-fa1eafedab09.png)

_______ Рис. 25. 21 Настройка TextMeshPro в параметре 

_______ ![image](https://user-images.githubusercontent.com/119482774/204790051-f760c15d-9f12-4c28-99a3-1d5b2d10b9ee.png)

_______ Рис. 25. 22 Настройка параметра ElectricPower

_______ ![image](https://user-images.githubusercontent.com/119482774/204790111-b9a94793-4f53-4f7c-a588-21529139ba59.png)

_______ ![image](https://user-images.githubusercontent.com/119482774/204790210-9031d309-fd68-439d-bf5b-e157f3bddadd.png)

_______ Рис. 25. 23 и 25. 24. Настройка TextMeshPro в параметре ElectricPower

_______ ![image](https://user-images.githubusercontent.com/119482774/204790275-59437dd1-7758-43f7-8c70-d1ae5ed2363d.png)

_______ Рис. 25.  .25 Настройка параметра PointObject

_______ ![image](https://user-images.githubusercontent.com/119482774/204790471-957d4eff-f63e-4fd8-ab76-4a74c91273ae.png)

_______ Рис. 25. 26 Настройки параметра Line 

_______ ![image](https://user-images.githubusercontent.com/119482774/204790570-b3e02490-07e4-4d1f-99f1-66cd7733f08c.png)

_______ Рис. 25. 27 Настройка параметра ScoreCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204790773-9a7538be-ec49-4a63-b8ae-854e0205e003.png)

_______ Рис. 25. 28 Настройка параметра Image в параметре ScoreCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204790837-c33f2dfa-8817-4f3e-a406-1a2b509aecbc.png)

_______ Рис. 25 29.  Настройка параметра TextMeshPro Text в параметре ScoreCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204790931-e28739de-181a-45a2-b28e-7effa50c0450.png)

_______ Рис. 25. 30 Настройка параметра TextMeshPro Text в параметре ScoreCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204791004-c7a495d0-51aa-4bff-98b2-9d4237c01643.png)

_______ Рис. 25. 31 Настройка параметра EventSystem Параметр StartCanvas и его дочерние объекты Panel и Button

_______ ![image](https://user-images.githubusercontent.com/119482774/204791148-5f223f52-039f-4f83-9e2f-72adaee655ee.png)

_______ Рис. 25. 32 Настройка параметра StartCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204791194-c5a572ff-6ba6-4f33-b006-39d7f4667c2d.png)

_______ Рис. 25. 33 Настройка параметра Panel

_______ ![image](https://user-images.githubusercontent.com/119482774/204791256-7f6947e2-ea9f-4e12-9554-c56bc678770f.png)

_______ Рис. 25 .34 Настройка параметра TextMeshPro Text в параметре StartCanvas

_______ ![image](https://user-images.githubusercontent.com/119482774/204791410-232f7419-471a-4733-b1c3-4177b93525bd.png)

_______ Рис. 25 35 Настройка параметра TextMeshPro Text в параметре StartCanvas





```2.	Скрипт Ball

using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class Ball : MonoBehaviour
{    Rigidbody2D rgbd;
    public Vector2 maxForce;
    public float forceAppliedInSidewaysDirection;
    public bool moving;
    float sidewaysMovement;
    BallFuctionality ballFuctionality;
    // Start is called before the first frame update
    void Start()
    {
        rgbd = GetComponent<Rigidbody2D>();
        ballFuctionality = GetComponent<BallFuctionality>();
    }
    // Update is called once per frame
    void Update()
    {
        // clampVeclocity();
      //  Debug.Log(rgbd.velocity);
        movement();
    }
    public void FixedUpdate()
    {
        if (!moving)
        {
            Vector2 vel = rgbd.velocity;
            vel.x = Mathf.Lerp(vel.x, 0, 0.2f);
            rgbd.velocity = vel;
        }
    }
    void clampVeclocity()
    {
        Vector2 vel = rgbd.velocity;
        if (Mathf.Abs(vel.x) >= maxForce.x)
        {
            vel.x = maxForce.x * Mathf.Sign(rgbd.velocity.x);
        }
        if ((vel.y) >= maxForce.y)
        {   if (ballFuctionality.jumpHigher) return;
            vel.y = maxForce.y;
        }
        rgbd.velocity = vel;
    }
    void movement()
    {
        if (Input.GetKey(KeyCode.LeftArrow))
        {
            rgbd.AddForce(new Vector2(-forceAppliedInSidewaysDirection, 0));
        }
        if (Input.GetKey(KeyCode.RightArrow))
        {
            rgbd.AddForce(new Vector2(forceAppliedInSidewaysDirection, 0));
        }
        if (Input.GetKeyDown(KeyCode.RightArrow) || Input.GetKeyDown(KeyCode.LeftArrow))
        {
            moving = true;
        }
        if (Input.GetKeyUp(KeyCode.RightArrow) || Input.GetKeyUp(KeyCode.LeftArrow))
        {
            moving = false;
        }
    }
}

3.	Скрипт BlockScript
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class BlockScript : MonoBehaviour
{
    public bool moveBlock, fallingBlock;
    bool startMovingBlock, startFallingBlock;
    Rigidbody2D rgbd;
    bool moveLeft;
    // Start is called before the first frame update
    void Start()
    {
        rgbd = GetComponent<Rigidbody2D>();
        if (Random.value > 0.5)
        {
            moveLeft = true;
        }
    }
    // Update is called once per frame
    void Update()
    {
        if (startMovingBlock && moveBlock)
        {
            if (moveLeft)
            {
                rgbd.velocity = new Vector2(-3, 0);
            }
            else
            {
                rgbd.velocity = new Vector2(3, 0);
            }
        }
    }
    public void OnCollisionEnter2D(Collision2D collision)
    {   if(collision.collider.tag == "Player") {
            if (moveBlock)
            {
                startMovingBlock = true;
            }
            else if (fallingBlock)
            {
                rgbd.bodyType = RigidbodyType2D.Dynamic;
            }
        }
    }
}



4.	Скрипт CameraController
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class Node : MonoBehaviour
{
    public Vector2 Pos => transform.position;
    public Block OccupiedBlock;
}
5. Скрипт Manager
using System.Collections;
using UnityEngine.SceneManagement;
using UnityEngine;
public class Manager : MonoBehaviour
{
    public bool slowTime, fastTime;
    public float slow;
    public bool startGame;
    public void slowTimerStart()
    {
        StartCoroutine(slowTheTime());
    }
    IEnumerator slowTheTime()
    {
        slowTime = true;
        Time.timeScale = 1 / slow;
        Time.fixedDeltaTime = Time.fixedDeltaTime / slow;
        FindObjectOfType<BallFuctionality>().forceAppliedInUpwardDirection *= 2;
        yield return new WaitForSeconds(2 * slow);
        Time.timeScale = 1;
        Time.fixedDeltaTime = Time.fixedDeltaTime * slow;
        FindObjectOfType<BallFuctionality>().forceAppliedInUpwardDirection /= 2;
        slowTime = false;
    }
    public void FastTimerStart()
    {
        StartCoroutine(fastTheTime());
    }
    IEnumerator fastTheTime()
    {
        fastTime = true;
        Time.timeScale = 1 * slow;
        Time.fixedDeltaTime = Time.fixedDeltaTime * slow;
        FindObjectOfType<BallFuctionality>().forceAppliedInUpwardDirection /= 2;
        yield return new WaitForSeconds(2 * slow);
        Time.timeScale = 1;
        Time.fixedDeltaTime = Time.fixedDeltaTime / slow;
        FindObjectOfType<BallFuctionality>().forceAppliedInUpwardDirection *= 2;
        fastTime = false;
    }
    public void StartTheGame()
    {
        startGame = true;
        FindObjectOfType<BallFuctionality>().GetComponent<Rigidbody2D>().bodyType = RigidbodyType2D.Dynamic;
    }
    public void RestartTheGame()
    {
        SceneManager.LoadScene(SceneManager.GetActiveScene().buildIndex);
    }
}
6. Скрипт PointsObject
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class PointsObject : MonoBehaviour
{
    Transform[] childObj;
    public GameObject Points1;
    public int force;
    public bool hasBroke;
   public void Explode()
    {
        hasBroke = true;
        Points1.SetActive(true);
        Points1.GetComponent<Rigidbody2D>().bodyType = RigidbodyType2D.Dynamic;
        Points1.GetComponent<Rigidbody2D>().AddForceAtPosition(Vector2.up * force * 3 / 2, Points1.transform.position);
        foreach (Transform t in transform)
        {
            Rigidbody2D rgbd = t.GetComponent<Rigidbody2D>();
            if (rgbd != null)
            {
                //shake camera 
                rgbd.bodyType = RigidbodyType2D.Dynamic;
                rgbd.AddForceAtPosition(Vector2.up * force, 
                    new Vector2(Random.Range(t.position.x - 2, t.position.x + 2), t.position.y));
                //play sound
            }
        }
    }
}
7. Скрипт Score
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
public class Score : MonoBehaviour
{
    public TMPro.TextMeshProUGUI scoreText;
    public int ScoreValue;
    public void AddScore()
    {
        ScoreValue++;
        scoreText.text = ScoreValue.ToString();
    }
}

```
Вывод: в ходе проделанной работы - разработана игра Bounce 
